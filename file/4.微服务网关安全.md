####  概述 

1. 微服务安全面临的挑战
2. OAuth2协议与微服务安全
3. 微服务网关安全

####  微服务安全的新挑战 

1. 更多的入口点，更高的安全风险
2. 性能问题
3. 服务间通讯安全
4. 跨多个微服务的请求难以追踪
5. 容器化部署导致的证书和访问控制问题
6. 如何在微服务间共享用户登录状态
7. 多语言架构要求每个团队都有一定的安全经验

####  常见的微服务安全整体架构 

1. 服务注册和发现
2. 配置中心
3. 服务网关
4. 安全中心
5. 熔断限流
6. 调用链监控
7. 指标监控
8. 日志监控
9. 监控检查和告警

####  OAuth2协议与微服务安全 

OAuth2的角色和流程

1. 用户直接访问客户端应用，他们不会直接访问微服务
2. 客户端应用从认证服务器获取令牌
3. 认证服务器分发令牌
4. 客户端应用代表用户访问微服务
5. 微服务访问认证服务器来验证从客户端应用请求中获得的令牌
6. 微服务扮演OAuth2协议中资源服务器的角色

####  搭建OAuth2认证服务器 

1. noc-server-auth

2. 测试：

   ```
   http://localhost:9090/oauth/token
   Basic Auth;Content-Type;username,password,grant_type=password,scope=read write
   ```

   



####  搭建OAuth2资源服务器 

####   重构代码以适应真实环境 

####  Zuul网关安全开发 

